{
    "$schema": "http://universaltest/schema/testmddefinition-5.json",
    "Package": {
        "ComponentName": "Networking",
        "SubComponentName": "spinxsk"
    },
    "Profiles": [
        {
            "Name": "Runtime60Minutes",
            "Execution":
            {
                "AdditionalParameter": "/p:Minutes=60"
            }
        },
        {
            "Name": "Runtime2Minutes",
            "Execution":
            {
                "AdditionalParameter": "/p:Minutes=2"
            }
        }
    ],
    "Dependencies": {
        "Packages": [
            "Microsoft-Windows-Test-TestNetv2-0",
            "Microsoft.UnifiedDriverDeployer"
        ],
        "Files": [
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\xdp\\core\\cat\\verified\\$(O)\\xdp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\xdp\\core\\sys\\verified\\$(O)\\xdp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\xdp\\core\\sys\\verified\\$(O)\\xdp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmpf.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BASEDIR)\\tools\\sha2-testroot.cer",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\tools\\dswdevice\\$(O)\\dswdevice.exe",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\xdp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\xdp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\xdp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\msxdp.dll",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(PROJECT_ROOT)\\xdp\\test\\scripts\\xdp.ps1",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmpf.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpmp\\xdpmp.ps1",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\fakendis\\fndis.ps1",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\fakendis\\fndis.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\spinxsk\\spinxsk.exe",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            }
        ]
    },
    "Plugins": [
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Registry.RegistryPlugin",
            "Name": "Enable DPC watchdog",
            "File": "",
            "Parameters": {
              "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Registry.RegistryPlugin-1.json",
              "Add": [
                {
                  "KeyName": "HKLM\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Kernel",
                  "ValueName": "ForceBugcheckForDpcWatchdog",
                  "Data": "1",
                  "DataType": "REG_DWORD"
                }
              ],
              "RebootAfterSetup": true,
              "RebootAfterCleanup": true
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.BcdEdit.BcdEditPlugin",
            "Name": "Turn on testsigning",
            "File": "",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.BcdEdit.BcdEditPlugin-1.json",
                "TestSigning": [
                    {
                        "Value": "on"
                    }
                ]
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Certificates.CertificatesPlugin",
            "Name": "Install test certificate",
            "File": "",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Certificates.CertificatesPlugin-1.json",
                "Certificates": [
                    {
                        "CertificateFileName": "sha2-testroot.cer",
                        "StoreName": "root",
                        "RegistryLocation": "localMachine"
                    }
                ]
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverInstall.DriverInstallPlugin",
            "Name": "Driver Installation Plugin",
            "File": "",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverInstall.DriverInstallPlugin‚Äê1.json"
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverVerifier.DriverVerifierPlugin",
            "Name": "Enable Driver Verifier",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverVerifier.DriverVerifierPlugin-1.json",
                "CustomArguments": "/standard /faults /driver xdp.sys"
            }
        }
    ],
    "Logs": [
        {
            "SourcePath": "spinxsk.txt",
            "DestinationFolderPath": ""
        }
    ]
}
