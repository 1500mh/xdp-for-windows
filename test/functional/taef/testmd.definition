{
    "$schema": "http://universaltest/schema/testmddefinition-5.json",
    "Package": {
        "ComponentName": "Networking",
        "SubComponentName": "XDP"
    },
    "Execution": {
        "Type": "TAEF"
    },
    "Dependencies": {
        "Packages": [
            "Microsoft-Windows-Test-TestNetv2-1",
            "Microsoft.UnifiedDriverDeployer"
        ],
        "Files": [
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\xdp\\core\\cat\\verified\\$(O)\\xdp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\xdp\\core\\sys\\verified\\$(O)\\xdp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\xdp\\core\\sys\\verified\\$(O)\\xdp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_ROOT)\\packages\\ApplyDriverUpdate"
            },
            {
                "SourcePath": "$(BASEDIR)\\tools\\sha2-testroot.cer",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(PROJECT_OBJ_ROOT)\\tools\\dswdevice\\$(O)\\dswdevice.exe",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\xdp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\xdp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\xdp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\xdpvrf\\msxdp.dll",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(PROJECT_ROOT)\\xdp\\test\\scripts\\xdp.ps1",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(PROJECT_ROOT)\\xdp\\test\\functional\\XdpFunctional.wprp",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.sys",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.cat",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.inf",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            },
            {
                "SourcePath": "$(BINARY_ROOT)\\xdp\\test\\functional\\xdpfnmp.ps1",
                "DestinationFolderPath": "$$(TEST_DEPLOY_BIN)"
            }
        ]
    },
    "Plugins": [
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.BcdEdit.BcdEditPlugin",
            "Name": "Turn on test signing",
            "File": "",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.BcdEdit.BcdEditPlugin-1.json",
                "TestSigning": [
                    {
                        "Value": "on"
                    }
                ]
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Certificates.CertificatesPlugin",
            "Name": "Install test certificate",
            "File": "",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Certificates.CertificatesPlugin-1.json",
                "Certificates": [
                    {
                        "CertificateFileName": "sha2-testroot.cer",
                        "StoreName": "root",
                        "RegistryLocation": "localMachine"
                    }
                ]
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverInstall.DriverInstallPlugin",
            "Name": "Driver Installation Plugin",
            "File": "",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverInstall.DriverInstallPlugin‚Äê1.json"
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverVerifier.DriverVerifierPlugin",
            "Name": "Enable Driver Verifier",
            "Parameters": {
                "$schema": "http://universaltest/schema/plugins/Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.DriverVerifier.DriverVerifierPlugin-1.json",
                "Level": {
                    "Standard": true
                },
                "Drivers": {
                    "Drivers": [
                      "xdp.sys",
                      "xdpfnmp.sys"
                    ]
                }
            }
        },
        {
            "Type": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Etw.EtwPlugin",
            "Name": "XDP Functional Test Diagnostics",
            "Parameters": {
                "$schema": "Microsoft.TestInfrastructure.UniversalTest.TestMD.Plugins.Etw.EtwPlugin-1.json",
                "Profiles": [
                    {
                        "ProfileFile": "XdpFunctional.wprp",
                        "Profile": "XdpFunctional"
                    }
                ],
                "BootTraceOptions": {
                        "EnableBootTrace": true,
                        "DisableReboot": true
                    }
            }
        }
    ],
    "Logs": [
        {
            "SourcePath": "XdpFunctional.log",
            "DestinationFolderPath": ""
        }
    ]
}
